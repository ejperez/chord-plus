!function(e){var r={};function t(s){if(r[s])return r[s].exports;var n=r[s]={i:s,l:!1,exports:{}};return e[s].call(n.exports,n,n.exports,t),n.l=!0,n.exports}t.m=e,t.c=r,t.d=function(e,r,s){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:s})},t.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},t.p="",t(t.s=0)}([function(e,r){String.prototype.replaceAll=function(e,r){return this.split(e).join(r)};var t={keys:["C","C#","Db","D","D#","Eb","E","F","F#","Gb","G","G#","Ab","A","A#","Bb","B"],flatKeys:["C","Db","D","Eb","E","F","Gb","G","Ab","A","Bb","B"],sharpKeys:["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],noteNames:["C","D","E","F","G","A","B"],keysWithFlats:["F","Bb","Eb","Ab","Db","Gb"],symbolsLookup:["[[:","[[","[[_",":]]","|"],notesDurationLookup:["1","2","4","8","16","1.","2.","4.","8.","16.","1_","2_","4_","8_","16_","1._","2._","4._","8._","16._"],useFlats:!1,steps:0,transposeNote:function(e){var r=t.sharpKeys.indexOf(e);-1===r&&(r=t.flatKeys.indexOf(e));var s=r+t.steps;return s<0?s=t.sharpKeys.length+s:s>=t.sharpKeys.length&&(s-=t.sharpKeys.length),t.useFlats?t.flatKeys[s]:t.sharpKeys[s]},transposeChord:function(e){var r=e.substr(0,1);if(-1===t.noteNames.indexOf(r))throw new Error("Error: Invalid note name --\x3e "+r);var s=e.substr(1),n=e.substr(1,1);if("#"===n?(r+="#",s=e.substr(2)):"b"===n&&(r+="b",s=e.substr(2)),(e=(r=t.transposeNote(r))+s).indexOf("/")>-1){var a=e.substr(e.indexOf("/")+1);e=e.substr(0,e.indexOf("/"))+"/"+t.transposeNote(a)}return e},getItemType:function(e){var r=e.substr(0,1),s=e.substr(e.length-1,1),n=e.substr(0,3);if("["===r&&"]"===s)return{type:"section",value:e.substr(1,e.length-2).replaceAll("-"," ")};if(-1!==t.symbolsLookup.indexOf(n)){if(":]]"===n){var a=e.length>3?e.substr(3):null;return{type:"repeat",value:r,times:2===parseInt(a)?null:a}}return{type:"symbol",value:e}}if('"'===r)return{type:"label",value:e.replaceAll('"',"").replaceAll("-"," ")};if("'"===r)return{type:"comment",value:e.replaceAll("'","").replaceAll("-"," ")};if("[["!==e.substr(0,2)){if("("===r){var l=[];return(e=e.replaceAll("(","").replaceAll(")","")).split(",").forEach(function(e){0!==t.steps||t.useFlats?l.push(t.transposeNote(e)):l.push(e)}),{type:"chord",value:"("+l.join(",")+")"}}var o=e,u=null,i="chord";if(-1!==o.indexOf(":")){var p=e.split(":");o=p[0],u=(u=p[1]).split(",").map(function(e){if(-1===t.notesDurationLookup.indexOf(e))throw new Error("Error: Invalid note duration --\x3e "+e);return e}),"r"===o&&(i="rest")}return{type:i,value:"x"===o||"r"===o?null:t.transposeChord(o),timing:u}}var f=e.substr(2);return useFlats=t.keysWithFlats.indexOf(f)>-1,{type:null,value:null}},parse:function(e,r,s){if(void 0!==r&&""!==r||(r="C"),-1===t.keys.indexOf(r))throw new Error("Error: Invalid value for key --\x3e "+r);var n=t.sharpKeys.indexOf(r);if(-1===n&&(n=t.flatKeys.indexOf(r)),void 0!==s&&""!==s){if(-1===t.keys.indexOf(s))throw new Error("Error: Invalid value for new key --\x3e "+r);var a=t.sharpKeys.indexOf(s);-1===a&&(a=t.flatKeys.indexOf(s)),t.steps=a-n,t.useFlats=t.keysWithFlats.indexOf(s)>-1,(0!==t.steps||t.useFlats)&&(r=t.transposeNote(r))}var l=[];return e.trim().split(" ").forEach(function(e){if(""!==e)if((e.match(/\s*[\r\n]+\s*/g)||[]).length){var r=e.trim().split(/\s*[\r\n]+\s*/g);r.forEach(function(e,s){l.push(t.getItemType(e)),s<r.length-1&&l.push({type:"break"})})}else l.push(t.getItemType(e))}),l}};e.exports={parse:t.parse,keys:t.keys}}]);